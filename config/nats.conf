# Configuração NATS para Produção - mcp-core-inventory

# Server Information
server_name: mcp-core-inventory-nats
server_tags: [production, inventory]

# Network
host: "0.0.0.0"
port: 4222

# HTTP Port for Monitoring
http_port: 8222

# Authorization
authorization {
    users: [
        {
            user: "admin"
            password: "your_nats_password_here"
            permissions: {
                publish: ">"
                subscribe: ">"
            }
        }
        {
            user: "inventory_service"
            password: "your_service_password_here"
            permissions: {
                publish: ["inventory.>", "events.>"]
                subscribe: ["inventory.>", "events.>"]
            }
        }
    ]
}

# JetStream Configuration
jetstream {
    # Store Directory
    store_dir: /data/jetstream
    
    # Memory Storage
    max_memory_store: 1GB
    
    # File Storage
    max_file_store: 10GB
    
    # Domain
    # domain: inventory_domain
    
    # Encryption
    # encrypt: true
    
    # Replication
    # replicas: 3
}

# Clustering (para alta disponibilidade)
# cluster {
#     name: inventory_cluster
#     port: 6222
#     routes: [
#         "nats://server1:6222"
#         "nats://server2:6222"
#         "nats://server3:6222"
#     ]
#     cluster_advertise: $CLUSTER_ADVERTISE
# }

# Logging
log_file: "/data/nats.log"
logtime: true
debug: false
trace: false

# Limits
max_connections: 1000
max_control_line: 512
max_payload: 1048576  # 1MB
max_pending: 67108864  # 64MB
max_subscriptions: 10000

# TLS (para produção)
# tls {
#     cert_file: "/etc/nats/cert.pem"
#     key_file: "/etc/nats/key.pem"
#     ca_file: "/etc/nats/ca.pem"
#     verify: true
#     verify_and_map: true
# }

# Monitoring
monitor_port: 8222

# Profiling
# prof_port: 6543

# System Account
# system_account: $SYSTEM_ACCOUNT

# Leafnode (para conexão com outros clusters)
# leafnodes {
#     remotes: [
#         {
#             url: "nats://remote-nats:7422"
#             credentials: "/etc/nats/creds.creds"
#         }
#     ]
# }

# WebSocket
# websocket {
#     port: 8080
#     no_tls: true
#     compression: true
# }
